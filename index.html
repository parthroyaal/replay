<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSV Data Table (Limited Rows)</title>
</head>
<body>

  <h1>CSV Data Table</h1>

  <div id="fetchSupportMessage"></div>
  <div id="fileLoadError"></div> <input type="file" id="csvFile" accept=".csv">

  <div id="tableContainer"></div>

  <script>
    const csvFile = document.getElementById('csvFile');
    const tableContainer = document.getElementById('tableContainer');
    const fetchSupportMessage = document.getElementById('fetchSupportMessage');
    const fileLoadError = document.getElementById('fileLoadError'); // New element for errors
    const maxRowsToDisplay = 10;

    // Check if fetch is supported
    if (window.fetch) {
      fetchSupportMessage.textContent = "Fetch API is supported! ðŸŽ‰";
    } else {
      fetchSupportMessage.textContent = "Fetch API is not supported. ðŸ˜¥";
      csvFile.disabled = true; 
    }

    csvFile.addEventListener('change', (event) => {
      const file = event.target.files[0];

      const fileReader = new FileReader();
      fileReader.onload = (e) => {
        fetch(e.target.result)
          .then(response => response.text())
          .then(csvData => {
            // ... (Your CSV processing and table creation code) ...
          })
          .catch(error => {
            console.error('Error reading CSV file:', error);
            fileLoadError.textContent = `Error loading CSV data: ${error.message}`; // Display error in the new element
          });
      };
      fileReader.readAsDataURL(file);
    });
  </script>
</body>
</html>